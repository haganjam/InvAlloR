[{"path":"https://haganjam.github.io/InvAlloR/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 InvAlloR authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-detailed-output-description.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Detailed description of the output","text":"main function exported InvAlloR called: get_trait_from_taxon(). generates relatively complex output vignette gives detailed description different outputs. output get_trait_from_taxon() list two data.frames named elements: data decision_data.","code":"get_trait_from_taxon(     data,                   # data.frame with at least five columns: target taxon, life stage, latitude (dd), longitude (dd) and body size (mm) if trait == \"equation\"     target_taxon,           # character string with the column name containing the taxon names     life_stage,             # character string with the column name containing the life stages     latitude_dd,            # character string with the column name containing the latitude in decimal degrees     longitude_dd,           # character string with the column name containing the longitude in decimal degrees     body_size,              # character string with the column name containing the body size data if trait = \"equation\"     workflow = \"workflow2\", # options are \"workflow1\" or \"workflow2\" (default = \"workflow2)     max_tax_dist = 3,       # maximum taxonomic distance acceptable between the target and the taxa in the database (default = 3)     trait = \"equation\",     # trait to be searched for (default = \"equation\")     gen_sp_dist = 0.5       # taxonomic distance between a genus and a species(default = 0.5) )"},{"path":[]},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-detailed-output-description.html","id":"workflow1-and-workflow2","dir":"Articles","previous_headings":"Overview > data element","what":"workflow1 and workflow2","title":"Detailed description of the output","text":"row [int] - variable specifying row number original, input data.frame (input column names) - different variables original, input data.frame. Inevitably, must include columns : taxon name, life-stage, latitude-longitude coordinates body length data habitat_id [num] - id number designating biogeographic realm, major habitat type ecoregion Abell et al.’s (2008) freshwater ecoregion map (https://www.feow.org/) realm [chr] - biogeographic realm based Abell et al.’s (2008) freshwater ecoregion map (https://www.feow.org/) major_habitat_type [chr] - major habitat type based Abell et al.’s (2008) freshwater ecoregion map (https://www.feow.org/) ecoregion [chr] - ecoregion based Abell et al.’s (2008) freshwater ecoregion map (https://www.feow.org/) clean_“taxon name variable” [chr] - target taxon name checking typos inclusion atypical characters done using bdc_clean_names() bdc R-package. variable name taxon name variable original, input data “clean_” prefix db [chr] - taxonomic database (gbif - https://www.gbif.org/, itis - https://www.itis.gov/ col - https://www.catalogueoflife.org/) scientificName [chr] - scientific name taxon original, input data one taxonomic databases (see db column) taxonRank [chr] - taxonomic rank scientificName one taxonomic databases (see db column) acceptedNameUsageID [chr] - unique code associated scientificName taxonomic database (see db column) taxon_order [chr] - order scientificName one taxonomic databases (see db column) taxon_family [chr] - family scientificName one taxonomic databases (see db column) trait_out [chr] - specifies trait queried. current version InvAlloR supports “equation” future updates may include traits. db_scientificName [chr] - scientific name taxon associated equation equation data based one taxonomic databases (see db column) id [num] - unique id associated trait datapoint trait databases. current version InvAlloR supports equations id corresponds unique id 350 equations equation database. tax_distance [num] - taxonomic distance scientificName taxon original input data db_scientificName taxon equation database based one taxonomic databases (see db column) body_size_range_match [logi] - TRUE/FALSE whether target body size original, input data within body size range given equation developed (within 30% error margin side) life_stage_match [logi] - TRUE/FALSE whether target life-stage original, input data matches life-stage equation r2_match [num] - coefficient determination (r^2) equation database n [num] - number samples used generate equation database db_min_body_size_mm [num] - minimum body size (mm) data used generate equation database db_max_body_size_mm [num] - maximum body size (mm) data used generate equation database realm_match [logi] - TRUE/FALSE whether lat-lon data original, input data provide biogeographic realm biogeographic realm location taxa sampled equation generated. previously, biogeographic realm based Abell et al.’s (2008) freshwater ecoregion map (https://www.feow.org/) major_habitat_type_match [logi] - TRUE/FALSE whether lat-lon data original, input data provide major habitat type major habitat type location taxa sampled equation generated. previously, major habitat type based Abell et al.’s (2008) freshwater ecoregion map (https://www.feow.org/) ecoregion_match [logi] - TRUE/FALSE whether lat-lon data original, input data provide ecoregion ecoregion location taxa sampled equation generated. previously, ecoregion based Abell et al.’s (2008) freshwater ecoregion map (https://www.feow.org/) preservation [chr] - method used preserve specimens used generate equation: “none” - preservation, “ethanol” - preserved ethanol “formaldehyde” - preserved formaldehyde equation_form [chr] - database supports two types equation: “model1” - log-log linear equation “model2” - non-linear equation. See documentation details models log_base [num] - base log “model1” equations [num] - parameter “model1” “model2” equations. See documentation details models b [num] - b parameter “model1” “model2” equations. See documentation details models lm_corrrection [num] - corrections “model1” equations remove bias associated back-transforming predictions made log-log scale natural scale. See documentation details. lm_correction_type [chr] - specific correction factor used “model1” equations based availability information like mean squared errors original papers. See documentation details. dry_biomass_scale [num] - multiplier convert equation output mg","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-detailed-output-description.html","id":"workflow2-only","dir":"Articles","previous_headings":"Overview > data element","what":"workflow2 only:","title":"Detailed description of the output","text":"dry_biomass_mg [num] - dry biomass (mg) derived body size given original, input data using chosen equation","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-detailed-output-description.html","id":"decision_data-element","dir":"Articles","previous_headings":"Overview","what":"decision_data element","title":"Detailed description of the output","text":"decision_data element, much output . Specifically, following columns variables , therefore, repeat explanations. variables : row [int] (input column names) habitat_id [num] realm [chr] major_habitat_type [chr] ecoregion [chr] clean_“taxon name variable” [chr] db [chr] scientificName [chr] taxonRank [chr] acceptedNameUsageID [chr] taxon_order [chr] taxon_family [chr] trait_out [chr] db_scientificName [chr] id [num] tax_distance [num] body_size_range_match [logi] life_stage_match [logi] r2_match [num] n [num] db_min_body_size_mm [num] db_max_body_size_mm [num] realm_match [logi] major_habitat_type_match [logi] ecoregion_match [logi] , however, three additional columns: recommend [logi] - TRUE/FALSE whether InvAlloR recommends equation. recommendation based taxonomic distance, target body size compared body size range equation generated whether life-stage target equation match. FALSE, explanation recommended given next column. explanation [chr] - explanation given equation recommended workflow2_choice [logi] - TRUE/FALSE whether InvAlloR select equation using workflow2","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-technical-information.html","id":"forms-of-the-length-dry-biomass-allometric-equations-in-invallor","dir":"Articles","previous_headings":"","what":"Forms of the length-dry biomass allometric equations in InvAlloR","title":"Description of the model forms for the equations","text":"Based extensive review literature length-dry biomass allometric equations freshwater invertebrates, two different model forms.","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-technical-information.html","id":"model-form-1","dir":"Articles","previous_headings":"Forms of the length-dry biomass allometric equations in InvAlloR","what":"Model form 1","title":"Description of the model forms for the equations","text":"common model form literature power function multiplicative error structure (model1 InvAlloR package): Y=(Xb)⋅eϵ Y = (X^b) \\cdot e^\\epsilon \\tag{Equation-1} model fit Y (.e. dry biomass) X (.e. body size) variables log-transformed. example, let’s consider taking natural logarithm sides equation: ln(Y)=ln()+ln(Xb)+ϵ ln(Y) = ln() + ln(X^b) + \\epsilon \\tag{Equation-2} equation simplifies : ln(Y)=ln()+(b⋅ln(X))+ϵ ln(Y) = ln() + (b \\cdot ln(X)) + \\epsilon \\tag{Equation-3} simplified version standard linear regression equation. However, given fit model log-log space additive error, back-transform error, longer centered zero. means typically require correction factor obtain appropriate back-transformed Y value (compare Equation 1 Equation 3).","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-technical-information.html","id":"model-form-2","dir":"Articles","previous_headings":"Forms of the length-dry biomass allometric equations in InvAlloR","what":"Model form 2","title":"Description of the model forms for the equations","text":"second model form (model2 InvAlloR package) model fit directly using non-linear regression model: Y=⋅(Xb)+ϵ Y = \\cdot (X^b) + \\epsilon \\tag{Equation-4} models fit using type non-linear regression equation, need corrections get predictions Y back onto natural scale. vast majority allometric equations literature InvAlloR database take form model1.","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-technical-information.html","id":"correction-factors-for-back-transforming-log-log-models","dir":"Articles","previous_headings":"","what":"Correction factors for back-transforming log-log models","title":"Description of the model forms for the equations","text":"InvAlloR package automatically implements range correction factors dry biomass outputs. detail various correction factors implemented InvAlloR. specific correction factor used, however, depends information available equation (see details ). problems using log-log models (.e. model1 forms) prediction original scale response variable well known (e.g. Marhrlein et al. 2016). Models form: Y=(Xb)⋅eϵ Y = (X^b) \\cdot e^\\epsilon \\tag{Equation-5}  typically transformed onto log-scale follows: log(Y)=log()+(b⋅log(X))+ϵ log(Y) = log() + (b \\cdot log(X)) + \\epsilon \\tag{Equation-6} problem transformation errors become multiplicative additive log-scale. Thus, predictions expected value Y become geometric mean rather arithmetric always underestimation. means predictions original-scale tend biased models. bias work mathematically? fit model log-scale, get expected value log(y) given X just fitted model coefficients multiplied predictor variables additive error. E(log(Y)|log(X))=βfitted⋅log(X)+ϵ E(log(Y)|log(X)) = \\beta_{fitted} \\cdot log(X) + \\epsilon \\tag{Equation-7} , however, want following: E(elog(Y)|log(X)) E(e^{log(Y)} |log(X)) \\tag{Equation-8} , simply take exponential sides equation, get following: eE(log(Y)|log(X))=eβfitted⋅log(X)+ϵ e^{E(log(Y)|log(X))} = e^{\\beta_{fitted} \\cdot log(X) + \\epsilon} \\tag{Equation-9} solve taking expectation sides E simplification, get : E(Y|X)=E(eβfitted⋅log(X))⋅E(eϵ) E(Y|X) = E(e^{\\beta_{fitted} \\cdot log(X)}) \\cdot E(e^{\\epsilon}) \\tag{Equation-10}  shows get quantity want (.e. E(Y|X)), need multiply model prediction expectation exponentiated errors. several correction factors can used solve issue. InvAlloR uses three correction factors depend different sources information (e.g. model fit: r2r^2, maximimum minimum y-values, residual mean square residuals).","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-technical-information.html","id":"duans-smearing-factor","dir":"Articles","previous_headings":"Correction factors for back-transforming log-log models","what":"Duan’s smearing factor","title":"Description of the model forms for the equations","text":"first correction use standard Duan’s smearing factor (Duan 1983, Journal American Statistical Association). correction factor requires data residuals calculate , therefore, typically easy extract literature. However, papers report directly digitised scatter plots calculated equations. smearing factor calculated : E(eresiduals) E(e^{residuals}) \\tag{Equation-11} , using different logarithm base: E(baseresiduals) E(base^{residuals}) \\tag{Equation-12}","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-technical-information.html","id":"bird-and-prairie-1985","dir":"Articles","previous_headings":"Correction factors for back-transforming log-log models","what":"Bird and Prairie (1985)","title":"Description of the model forms for the equations","text":"correction factor proposed Bird Prairie (1985, Journal Plankton Research) multiply antilog outputted dry biomass natural scale following correction factor uses residual mean square (RMS): eRMS2 e^{\\frac{RMS}{2}} \\tag{Equation-13} , RMSRMS residual mean square mean squared error (see MSE, RMS RMSE section ).","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-technical-information.html","id":"strimbu-et-al--2018","dir":"Articles","previous_headings":"Correction factors for back-transforming log-log models","what":"Strimbu et al. (2018)","title":"Description of the model forms for the equations","text":"vast majority correction factors deal log-transformation bias rely knowing standard deviation model residuals. However, researchers compile equations literature, usually access standard deviation residuals. means typical correction factors work cases. Strimbu et al. (2018, Forestry) recently proposed set correction factors work access residuals model available. InvAlloR, generally information equation, range X values used fit equation coefficient determination (.e. r2r^2 value). Using Strimbu et al.’s (2018, Forestry) correction factors, information tends sufficient. Specifically, Strimbu et al. (2018, Forestry) propose two correction factors may able use log-linear equations database: BC3=e(0.5⋅(1−r2))⋅(1log()⋅(logb=(ymax)−logb=(ymax))6)2 BC3 = e^{(0.5 \\cdot (1-r^2)) \\cdot  (\\frac{1}{log()} \\cdot \\frac{( log_{b=}(y_{max})-log_{b=}(y_{max}) )}{6})^2} \\tag{Equation-14} correction factor require r2r^2 : BC4=e1log()2⋅(logb=(ymax)−logb=(ymin))272 BC4 = e^{\\frac{1}{log()^2} \\cdot \\frac{( log_{b=}(y_{max})-log_{b=}(y_{min}) )^2}{72}} \\tag{Equation-15}","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-technical-information.html","id":"mse-rms-and-rmse","dir":"Articles","previous_headings":"Correction factors for back-transforming log-log models","what":"MSE, RMS and RMSE","title":"Description of the model forms for the equations","text":"much older literature, tends confusion use different terms like mean square error, residual mean square root mean squared error. make sure clear, far can tell, mean squared error (MSEMSE) calculated way residual mean square (RMSRMS). appears RMSRMS older term. Nonetheless, calculated : MSE=1n⋅∑=1n(yi−ŷ) MSE = \\frac{1}{n} \\cdot \\sum_{=1}^{n} (y_{} - \\hat{y}_{}) \\tag{Equation-16} yiy_i observed data ŷ\\hat{y}_i predicted data. Therefore, MSEMSE (RMSRMS) simply average squared residuals. , take square root RMSRMS get RMSERMSE root mean squared error. RMSE=MSE RMSE = \\sqrt{MSE} \\tag{Equation-17} generally use RMSERMSE standard deviation regression. , denominator always (1n\\frac{1}{n}). typically (1n−K\\frac{1}{n - K}) kk number parameters model fit . Therefore, can write standard deviation regression (ss) : s=1n−K⋅∑=1n(yi−ŷ) s = \\sqrt{\\frac{1}{n-K} \\cdot \\sum_{=1}^{n} (y_{} - \\hat{y}_{})} \\tag{Equation-18} , given dealing models two parameters, small difference can probably ignored can use RMSERMSE measure standard deviation model.","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-technical-information.html","id":"preservation-effects","dir":"Articles","previous_headings":"","what":"Preservation effects","title":"Description of the model forms for the equations","text":"recommended approach generating length-dry biomass equations use fresh specimens frozen specimens (Benke et al. 1999). preservation commonly used preservatives like formalin ethanol can cause mass loss lipids compounds may dissolve. Loss dry mass due preservation can substantial. example, Mahrlein et al. (2016, Hydrobiologia) report dry weight loss 20% due preservation ethanol. Similarly, Wetzel et al. (2005, Helgoland Marine Researcg) report dry weight loss 30% due formalin ethanol preservation. contrast common doctrine preservation-induced mass loss less prevalent animals preserved formalin (Leuven et al. 1985, Hydrobiologia). numbers (20% 30%) significant , therefore, best account best ability. Generating equations gathering test data used different preservation methods can lead large additional source error estimating dry biomass. However, another issue preservation methods. Usually, want estimate dry biomass communities species collected preserved. However, individuals preserved ethanol formalin can also change lengths. Thus, preserved individuals measured length, measured lengths can incorrect. need look carefully preservation methods used generate equation preservation used testing data dataset length data come . added information proposed correction factors equations equation database. However, given enough correction factors available literature, , yet, implemented corrections standard output InvAlloR.","code":""},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-user-guide.html","id":"using-invallor","dir":"Articles","previous_headings":"","what":"Using InvAlloR","title":"Using InvAlloR","text":"see can use InvAlloR obtain estimates dry biomass freshwater invertebrates using taxon names geographical coordinates, start loading test data. test data consist invertebrate taxa collected six temporary ponds nature reserve Belgium. addition, data consist latitude-longitude coordinates samples well measured body lengths taxa. want use body length data (.e. length_mm variable) estimate dry biomass samples using length-dry biomass allometric equations. InvAlloR package houses database 350 length-dry biomass allometric equations represent major groups freshwater invertebrates globally. can use InvAlloR search database appropriate length-dry biomass equations samples test data (pond_df). , two options rely get_trait_from_taxon() function. function (see ) takes data.frame least five columns. columns taxon name dry biomass data required, life stage taxon, latitude longitude coordinates taxon sampled body size taxon:","code":"# load the test data pond_df <- readr::read_csv(\"InvAlloR-vignette-data.csv\") #> Rows: 40 Columns: 5 #> ── Column specification ──────────────────────────────────────────────────────── #> Delimiter: \",\" #> chr (2): target_taxon, life_stage #> dbl (3): lat, lon, length_mm #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. head(pond_df) #> # A tibble: 6 × 5 #>   target_taxon      life_stage   lat   lon length_mm #>   <chr>             <chr>      <dbl> <dbl>     <dbl> #> 1 Acilius sulcatus  adult       51.1  5.33     16.3  #> 2 Acilius sulcatus  larva       51.1  5.33      8.1  #> 3 Agabus striolatus adult       51.1  5.33     10.1  #> 4 Ceratopogonidae   pupa        51.1  5.33     13.3  #> 5 Chaoborus         larva       51.1  5.33     13.1  #> 6 Chironomidae      pupa        51.1  5.33      9.25  # how many unique taxa are there? length(unique(pond_df$target_taxon)) #> [1] 35  # check the summary statistics summary(pond_df) #>  target_taxon        life_stage             lat             lon        #>  Length:40          Length:40          Min.   :51.12   Min.   :5.332   #>  Class :character   Class :character   1st Qu.:51.12   1st Qu.:5.332   #>  Mode  :character   Mode  :character   Median :51.12   Median :5.332   #>                                        Mean   :51.12   Mean   :5.332   #>                                        3rd Qu.:51.12   3rd Qu.:5.332   #>                                        Max.   :51.12   Max.   :5.332   #>    length_mm      #>  Min.   : 0.459   #>  1st Qu.: 6.878   #>  Median : 9.455   #>  Mean   :11.261   #>  3rd Qu.:13.402   #>  Max.   :65.000 get_trait_from_taxon(     data,                   # data.frame with at least five columns: target taxon, life stage, latitude (dd), longitude (dd) and body size (mm) if trait == \"equation\"     target_taxon,           # character string with the column name containing the taxon names     life_stage,             # character string with the column name containing the life stages     latitude_dd,            # character string with the column name containing the latitude in decimal degrees     longitude_dd,           # character string with the column name containing the longitude in decimal degrees     body_size,              # character string with the column name containing the body size data if trait = \"equation\"     workflow = \"workflow2\", # options are \"workflow1\" or \"workflow2\" (default = \"workflow2)     max_tax_dist = 3,       # maximum taxonomic distance acceptable between the target and the taxa in the database (default = 3)     trait = \"equation\",     # trait to be searched for (default = \"equation\")     gen_sp_dist = 0.5       # taxonomic distance between a genus and a species(default = 0.5) )"},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-user-guide.html","id":"workflow1","dir":"Articles","previous_headings":"Using InvAlloR","what":"workflow1","title":"Using InvAlloR","text":"first option workflow1. workflow1 chosen, get_trait_from_taxon() search database , sample dataset, output equations within maximum taxonomic distance (max_tax_dist) set user. can use discretion choose equations like use. Let’s see works: output list length two two different data.frames: data relevant equations (data) data.frame information chose equations (decision_df). ’ll start looking outputted data equations. , let’s simply look first row raw data. , let us compare function outputs: output, several rows input row (labelled row column .e. input row 1 labelled ‘1’ row column). row input data, several rows output data. different rows correspond different equations database within maximum taxonomic distance set (.e. 3.5). idea workflow1 us now use discretion choose appropriate equations. look detail output, can also use View() function: important columns consider tax_distance column, body_size_range_match column life_stage_match column make initial decision. want low taxonomic distances, want length target data within body size range equation database (specified body_size_range_match column) , importantly, want life-stage target match life-stage equation. one equation matches life-stage (id = 169). Given target taxon (Acilius sulcatus) beetle, life-stage crucially important. problem, however, id = 169 body size range match. Indeed, equation developed body sizes 1.4 5.2 mm (db_min_body_size_mm db_min_body_size_mm columns) length data 16.3 mm. Thus, using equation considerable extrapolation. Given non-linearity many allometric equations, may problem. Nonetheless, equations within appropriate taxonomic appropriate life-stage, best can . can also use expert knowledge check biomass value obtain reasonable taxon (e.g. using literature, example). choices , course, subjective certain degree. point workflow1 provide relevant information make informed decisions. Based information, choose id = 169 equation appropriate life-stage information.","code":"# we specify the dol_df into the function pond_equ1 <- get_trait_from_taxon(   data = pond_df,   target_taxon = \"target_taxon\",   life_stage = \"life_stage\",   latitude_dd = \"lat\",   longitude_dd = \"lon\",   body_size = \"length_mm\",    workflow = \"workflow1\",   trait = \"equation\",   max_tax_dist = 3.5,   gen_sp_dist = 0.25 ) #>  #> >> Family names prepended to scientific names were flagged and removed from 0 records. #> >> Terms denoting taxonomic uncertainty were flagged and removed from 0 records. #> >> Other issues, capitalizing the first letter of the generic name, replacing empty names by NA, and removing extra spaces, were flagged and corrected or removed from 0 records. #> >> Infraspecific terms were flagged and removed from 0 records. #>  #> Querying using gbif database version 22.12 #>  #>  A total of 0 NA was/were found in sci_name. #>  #>  40 names queried in 0.2 minutes #>  #> >> Family names prepended to scientific names were flagged and removed from 0 records. #> >> Terms denoting taxonomic uncertainty were flagged and removed from 0 records. #> >> Other issues, capitalizing the first letter of the generic name, replacing empty names by NA, and removing extra spaces, were flagged and corrected or removed from 0 records. #> >> Infraspecific terms were flagged and removed from 0 records. #>  #> Querying using itis database version 22.12 #>  #>  A total of 0 NA was/were found in sci_name. #>  #>  40 names queried in 0.1 minutes #>  #> >> Family names prepended to scientific names were flagged and removed from 0 records. #> >> Terms denoting taxonomic uncertainty were flagged and removed from 0 records. #> >> Other issues, capitalizing the first letter of the generic name, replacing empty names by NA, and removing extra spaces, were flagged and corrected or removed from 0 records. #> >> Infraspecific terms were flagged and removed from 0 records. #>  #> Querying using col database version 22.12 #>  #>  A total of 0 NA was/were found in sci_name. #>  #>  40 names queried in 0.4 minutes # look at the first few rows of the data element head(pond_equ1$data) #> # A tibble: 6 × 38 #>     row target_taxon     life_stage   lat   lon length_mm habitat_id realm      #>   <int> <chr>            <chr>      <dbl> <dbl>     <dbl>      <dbl> <chr>      #> 1     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 2     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 3     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 4     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 5     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 6     2 Acilius sulcatus larva       51.1  5.33       8.1        404 Palearctic #> # ℹ 30 more variables: major_habitat_type <chr>, ecoregion <chr>, #> #   clean_target_taxon <chr>, db <chr>, scientificName <chr>, taxonRank <chr>, #> #   acceptedNameUsageID <chr>, taxon_order <chr>, taxon_family <chr>, #> #   trait_out <chr>, db_scientificName <chr>, id <dbl>, tax_distance <dbl>, #> #   body_size_range_match <lgl>, life_stage_match <lgl>, r2_match <dbl>, #> #   n <dbl>, db_min_body_size_mm <dbl>, db_max_body_size_mm <dbl>, #> #   realm_match <lgl>, major_habitat_type_match <lgl>, ecoregion_match <lgl>, … # look at the first few rows of the decision_df element head(pond_equ1$decision_data) #> # A tibble: 6 × 33 #>     row target_taxon     life_stage   lat   lon length_mm habitat_id realm      #>   <int> <chr>            <chr>      <dbl> <dbl>     <dbl>      <dbl> <chr>      #> 1     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 2     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 3     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 4     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 5     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 6     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> # ℹ 25 more variables: major_habitat_type <chr>, ecoregion <chr>, #> #   clean_target_taxon <chr>, db <chr>, scientificName <chr>, taxonRank <chr>, #> #   acceptedNameUsageID <chr>, taxon_order <chr>, taxon_family <chr>, #> #   trait_out <chr>, db_scientificName <chr>, id <dbl>, tax_distance <dbl>, #> #   body_size_range_match <lgl>, life_stage_match <lgl>, r2_match <dbl>, #> #   n <dbl>, db_min_body_size_mm <dbl>, db_max_body_size_mm <dbl>, #> #   realm_match <lgl>, major_habitat_type_match <lgl>, ecoregion_match <lgl>, … # check the first row of the data that we fed into the function print(pond_df[1,]) #> # A tibble: 1 × 5 #>   target_taxon     life_stage   lat   lon length_mm #>   <chr>            <chr>      <dbl> <dbl>     <dbl> #> 1 Acilius sulcatus adult       51.1  5.33      16.3 # check the first row of the output data with the equations print(dplyr::filter(pond_equ1$data, row == 1)) #> # A tibble: 5 × 38 #>     row target_taxon     life_stage   lat   lon length_mm habitat_id realm      #>   <int> <chr>            <chr>      <dbl> <dbl>     <dbl>      <dbl> <chr>      #> 1     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 2     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 3     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 4     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> 5     1 Acilius sulcatus adult       51.1  5.33      16.3        404 Palearctic #> # ℹ 30 more variables: major_habitat_type <chr>, ecoregion <chr>, #> #   clean_target_taxon <chr>, db <chr>, scientificName <chr>, taxonRank <chr>, #> #   acceptedNameUsageID <chr>, taxon_order <chr>, taxon_family <chr>, #> #   trait_out <chr>, db_scientificName <chr>, id <dbl>, tax_distance <dbl>, #> #   body_size_range_match <lgl>, life_stage_match <lgl>, r2_match <dbl>, #> #   n <dbl>, db_min_body_size_mm <dbl>, db_max_body_size_mm <dbl>, #> #   realm_match <lgl>, major_habitat_type_match <lgl>, ecoregion_match <lgl>, … View(dplyr::filter(pond_equ1$data, row == 1))"},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-user-guide.html","id":"using-the-chosen-equation","dir":"Articles","previous_headings":"Using InvAlloR > workflow1","what":"Using the chosen equation","title":"Using InvAlloR","text":"InvAlloR, exported helper function: use_equation_database(). function allows user supply data.frame body-size variable (body_size_var) equation-id variable (equation_id_var) obtain data.frame relevant dry-biomass equation. Given chose equation-id = 169 row = 1 (.e. first row data), can extract information data element get_trait_from_taxon() output. addition, select columns need use equation: row, id, length_mm: can use use_equation_database() function use equation calculate dry biomass datapoint follows: function outputs data dry biomass estimate (output object): addition, outputs equation metadata can inspected necessary: Checking literature, found ca. 50 mg atypical Dysticid diving beetle adult provides confidence estimate (Klecka Boukal 2013, Journal Animal Ecology).","code":"# extract the first row of data and chosen equation id ex1 <-   pond_equ1$data |>   dplyr::filter(row == 1, id == 169) |>   dplyr::select(row, id, length_mm) head(ex1) #> # A tibble: 1 × 3 #>     row    id length_mm #>   <int> <dbl>     <dbl> #> 1     1   169      16.3 # calculate the dry-biomass of row 1 using equation id = 169 ex1 <-   use_equation_database(data = ex1,                         body_size_var = \"length_mm\",                         equation_id_var = \"id\") # view the output ex1$output #> # A tibble: 1 × 3 #>   length_mm    id dry_biomass_mg #>       <dbl> <dbl>          <dbl> #> 1      16.3   169           56.7 # view the metadata ex1$metadata #> # A tibble: 1 × 28 #>     row equation_id length_mm db_taxon    db_life_stage preservation #>   <int>       <dbl>     <dbl> <chr>       <chr>         <chr>        #> 1     1         169      16.3 Laccophilus adult         none         #> # ℹ 22 more variables: preservation_percentage <chr>, #> #   correction_percentage <dbl>, correction_factor_id <chr>, #> #   body_size_meas <chr>, body_size_unit <chr>, body_size_min <dbl>, #> #   body_size_max <dbl>, equation_form <chr>, log_base <dbl>, a <dbl>, b <dbl>, #> #   dry_biomass_scale <dbl>, dry_biomass_min <dbl>, dry_biomass_max <dbl>, #> #   dry_biomass_unit <chr>, RMS <dbl>, n <dbl>, r2 <dbl>, lm_correction <dbl>, #> #   lm_correction_type <chr>, lm_reference <chr>, reference <dbl>"},{"path":"https://haganjam.github.io/InvAlloR/articles/InvAlloR-user-guide.html","id":"workflow2","dir":"Articles","previous_headings":"Using InvAlloR","what":"workflow2","title":"Using InvAlloR","text":"second option obtaining dry biomass estimates set taxa workflow2 automated workflow selecting equations. Let’s see works: Unlike workflow1, open output data, number rows input data (.e. pond_df). InvAlloR automatically selected appropriate equation row appropriate equation available database. Moreover, InvAlloR directly calculated expected dry biomass (see dry_biomass_mg column) example, let’s look first row: case, columns filled NA values. appropriate equation taxon according InvAlloR workflow2 criteria. equation selected workflow2, meet three conditions: taxonomic distance must less maximum taxonomic taxonomic distance (case 3.5 set ) target body size must within body size range equation (± 30%) life-stage target taxon equation must match clear looking example workflow1, equations met three criteria. Therefore, ended using equation target body size within body size range equation, Indeed, look whole output, many rows equations means InvAlloR unable find appropriate equations database based three criteria. fact, dataset, InvAlloR able find equations 25 % data points 29 % unique taxa. want get insight InvAlloR unable find appropriate equations different rows, can look second output decision_data. row, shows equations considered column called explanation, explains given equation chosen. However, case, specified certain levels maximum taxonomic distance function. happens relax increase acceptable maximum taxonomic distance increase 4 (instead 3.5)? get higher proportion datapoint taxa appropriate equations? case, . occurs, user can see datapoints appropriate equations given use decision data see appropriate equations taxa InvAlloR missed. Otherwise, good equation can found, one might use order-level equations instead available many research papers (e.g. Benke et al. 1999).","code":"# we specify the dol_df into the function and select workflow2 pond_equ2 <- get_trait_from_taxon(   data = pond_df,   target_taxon = \"target_taxon\",   life_stage = \"life_stage\",   latitude_dd = \"lat\",   longitude_dd = \"lon\",   body_size = \"length_mm\",    workflow = \"workflow2\",   trait = \"equation\",   max_tax_dist = 3.5,   gen_sp_dist = 0.25 ) #>  #> >> Family names prepended to scientific names were flagged and removed from 0 records. #> >> Terms denoting taxonomic uncertainty were flagged and removed from 0 records. #> >> Other issues, capitalizing the first letter of the generic name, replacing empty names by NA, and removing extra spaces, were flagged and corrected or removed from 0 records. #> >> Infraspecific terms were flagged and removed from 0 records. #>  #> Querying using gbif database version 22.12 #>  #>  A total of 0 NA was/were found in sci_name. #>  #>  40 names queried in 0.2 minutes #>  #> >> Family names prepended to scientific names were flagged and removed from 0 records. #> >> Terms denoting taxonomic uncertainty were flagged and removed from 0 records. #> >> Other issues, capitalizing the first letter of the generic name, replacing empty names by NA, and removing extra spaces, were flagged and corrected or removed from 0 records. #> >> Infraspecific terms were flagged and removed from 0 records. #>  #> Querying using itis database version 22.12 #>  #>  A total of 0 NA was/were found in sci_name. #>  #>  40 names queried in 0.1 minutes #>  #> >> Family names prepended to scientific names were flagged and removed from 0 records. #> >> Terms denoting taxonomic uncertainty were flagged and removed from 0 records. #> >> Other issues, capitalizing the first letter of the generic name, replacing empty names by NA, and removing extra spaces, were flagged and corrected or removed from 0 records. #> >> Infraspecific terms were flagged and removed from 0 records. #>  #> Querying using col database version 22.12 #>  #>  A total of 0 NA was/were found in sci_name. #>  #>  40 names queried in 0.4 minutes # check the first row of the output data with the equations print(dplyr::filter(pond_equ2$data, row == 1)) #> # A tibble: 1 × 39 #>     row target_taxon     life_stage   lat   lon length_mm habitat_id realm #>   <int> <chr>            <chr>      <dbl> <dbl>     <dbl>      <dbl> <chr> #> 1     1 Acilius sulcatus adult       51.1  5.33      16.3         NA NA    #> # ℹ 31 more variables: major_habitat_type <chr>, ecoregion <chr>, #> #   clean_target_taxon <chr>, db <chr>, scientificName <chr>, taxonRank <chr>, #> #   acceptedNameUsageID <chr>, taxon_order <chr>, taxon_family <chr>, #> #   trait_out <chr>, db_scientificName <chr>, id <dbl>, tax_distance <dbl>, #> #   body_size_range_match <lgl>, life_stage_match <lgl>, r2_match <dbl>, #> #   n <dbl>, db_min_body_size_mm <dbl>, db_max_body_size_mm <dbl>, #> #   realm_match <lgl>, major_habitat_type_match <lgl>, ecoregion_match <lgl>, … # check the equations chosen View(pond_equ2$data) # proportion of data points for which appropriate equations were found sum(!is.na(pond_equ2$data$id))/nrow(pond_equ2$data) #> [1] 0.25 # proportion of unique taxa for which appropriate equations were found n <-   dplyr::filter(pond_equ2$data, !is.na(id)) |>   dplyr::pull(target_taxon) |>   unique() |>   length()  n / length(unique(pond_equ2$data$target_taxon)) #> [1] 0.2857143 # check the decision_data View(pond_equ2$decision_data) # we specify the pond_df into the function and select workflow2 pond_equ2 <- get_trait_from_taxon(   data = pond_df,   target_taxon = \"target_taxon\",   life_stage = \"life_stage\",   latitude_dd = \"lat\",   longitude_dd = \"lon\",   body_size = \"length_mm\",    workflow = \"workflow2\",   trait = \"equation\",   max_tax_dist = 4,   gen_sp_dist = 0.25 ) #>  #> >> Family names prepended to scientific names were flagged and removed from 0 records. #> >> Terms denoting taxonomic uncertainty were flagged and removed from 0 records. #> >> Other issues, capitalizing the first letter of the generic name, replacing empty names by NA, and removing extra spaces, were flagged and corrected or removed from 0 records. #> >> Infraspecific terms were flagged and removed from 0 records. #>  #> Querying using gbif database version 22.12 #>  #>  A total of 0 NA was/were found in sci_name. #>  #>  40 names queried in 0.2 minutes #>  #> >> Family names prepended to scientific names were flagged and removed from 0 records. #> >> Terms denoting taxonomic uncertainty were flagged and removed from 0 records. #> >> Other issues, capitalizing the first letter of the generic name, replacing empty names by NA, and removing extra spaces, were flagged and corrected or removed from 0 records. #> >> Infraspecific terms were flagged and removed from 0 records. #>  #> Querying using itis database version 22.12 #>  #>  A total of 0 NA was/were found in sci_name. #>  #>  40 names queried in 0.1 minutes #>  #> >> Family names prepended to scientific names were flagged and removed from 0 records. #> >> Terms denoting taxonomic uncertainty were flagged and removed from 0 records. #> >> Other issues, capitalizing the first letter of the generic name, replacing empty names by NA, and removing extra spaces, were flagged and corrected or removed from 0 records. #> >> Infraspecific terms were flagged and removed from 0 records. #>  #> Querying using col database version 22.12 #>  #>  A total of 0 NA was/were found in sci_name. #>  #>  40 names queried in 0.4 minutes # proportion of data points for which appropriate equations were found sum(!is.na(pond_equ2$data$id))/nrow(pond_equ2$data) #> [1] 0.25 # proportion of unique taxa for which appropriate equations were found n <-   dplyr::filter(pond_equ2$data, !is.na(id)) |>   dplyr::pull(target_taxon) |>   unique() |>   length()  n / length(unique(pond_equ2$data$target_taxon)) #> [1] 0.2857143"},{"path":"https://haganjam.github.io/InvAlloR/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"James Hagan. Author, maintainer. Ronald Bergmann. Contributor.","code":""},{"path":"https://haganjam.github.io/InvAlloR/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Hagan J (2025). InvAlloR: Body length-dry biomass allometry equations functional traits taxonomic names based taxonomic hierarchy freshwater invertebrates. R package version 0.0.0.1, https://github.com/haganjam/InvAlloR.","code":"@Manual{,   title = {InvAlloR: Body length-dry biomass allometry equations and other functional traits for taxonomic names based on taxonomic hierarchy in freshwater invertebrates},   author = {James Hagan},   year = {2025},   note = {R package version 0.0.0.1},   url = {https://github.com/haganjam/InvAlloR}, }"},{"path":"https://haganjam.github.io/InvAlloR/index.html","id":"invallor","dir":"","previous_headings":"","what":"Body length-dry biomass allometry equations and other functional traits for taxonomic names based on taxonomic hierarchy in freshwater invertebrates","title":"Body length-dry biomass allometry equations and other functional traits for taxonomic names based on taxonomic hierarchy in freshwater invertebrates","text":"Pipeline assign body length-dry biomass allometry equations taxonomic name based taxonomic hierarchy freshwater invertebrates. [!WARNING] WIP","code":""},{"path":"https://haganjam.github.io/InvAlloR/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Body length-dry biomass allometry equations and other functional traits for taxonomic names based on taxonomic hierarchy in freshwater invertebrates","text":"can install InvAlloR GitHub. date, transitively depend terra, may require additional installation steps (GDAL) OS. Please see corresponding install section README first. may also need GNparser, transitive dependency bdc. follow installation instructions . used GNparser v1.11.6. Now ’ve installed terra GNparser feel lucky, try:","code":"wget https://github.com/gnames/gnparser/releases/download/v1.11.6/gnparser-v1.11.6-linux-x86.tar.gz tar xvf gnparser-v1.11.6-linux-x86.tar.gz mv gnparser /usr/local/bin/ install_github(\"haganjam/InvAlloR\")"},{"path":"https://haganjam.github.io/InvAlloR/index.html","id":"development","dir":"","previous_headings":"","what":"Development","title":"Body length-dry biomass allometry equations and other functional traits for taxonomic names based on taxonomic hierarchy in freshwater invertebrates","text":"’s devcontainer setup included. use VSC prompted open project container automatically. devtools bundled devcontainer. Load library(devtools) load_all(), test() check() ready hand. use renv provide reproducibility far gets R. Use renv::snapshot() changing dependencies, renv::restore() install declared versions dependencies renv::update() update latest CRAN versions (pushing CRAN).","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/clean_taxon_names.html","id":null,"dir":"Reference","previous_headings":"","what":"clean_taxon_names() — clean_taxon_names","title":"clean_taxon_names() — clean_taxon_names","text":"Get taxonomic distances target names relative taxa databases","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/clean_taxon_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"clean_taxon_names() — clean_taxon_names","text":"","code":"clean_taxon_names(data, target_taxon, life_stage, database = \"gbif\")"},{"path":"https://haganjam.github.io/InvAlloR/reference/clean_taxon_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"clean_taxon_names() — clean_taxon_names","text":"data data.frame column containing target taxon names life-stages target_taxon character string column name containing taxon names life_stage character string column name containing life_stages database taxonomic database use: gbif (default), itis, col","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/clean_taxon_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"clean_taxon_names() — clean_taxon_names","text":"data.frame target taxon names cleaned names chosen taxonomic backbone","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/clean_taxon_names.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"clean_taxon_names() — clean_taxon_names","text":"function takes data.frame target_taxa uses bdc package clean harmonise names.","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/clean_taxon_names.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"clean_taxon_names() — clean_taxon_names","text":"James G. Hagan (james_hagan()outlook.com) Ronald Bergmann","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/download_database.html","id":null,"dir":"Reference","previous_headings":"","what":"download_database — download_database","title":"download_database — download_database","text":"setup local database directory chosen rappdirs. download DB files current package version (tag) can determined available pkgname otherwise.","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/download_database.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"download_database — download_database","text":"","code":"download_database(pkgname)"},{"path":"https://haganjam.github.io/InvAlloR/reference/download_database.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"download_database — download_database","text":"filename name package","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_body_size_range_match.html","id":null,"dir":"Reference","previous_headings":"","what":"extract_body_size_range_match() — extract_body_size_range_match","title":"extract_body_size_range_match() — extract_body_size_range_match","text":"calculate whether target length matches equation range","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_body_size_range_match.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"extract_body_size_range_match() — extract_body_size_range_match","text":"","code":"extract_body_size_range_match(   equation_id,   target_body_size,   prop = 0.3,   equation_db )"},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_body_size_range_match.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"extract_body_size_range_match() — extract_body_size_range_match","text":"equation_id id number equation target_body_size body size target taxon prop proportion equation body size range considered acceptable using equation equation_db equation database object","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_body_size_range_match.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"extract_body_size_range_match() — extract_body_size_range_match","text":"string genus name","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_body_size_range_match.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"extract_body_size_range_match() — extract_body_size_range_match","text":"function generates data.frame three variables: body_size_range_match: whether target length within equation length range (TRUE FALSE), body_size_min_dist: percentage away minimum length used create equation, body_size_max_dist: percentage away maximum length.","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_body_size_range_match.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"extract_body_size_range_match() — extract_body_size_range_match","text":"James G. Hagan (james_hagan()outlook.com)","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_genus.html","id":null,"dir":"Reference","previous_headings":"","what":"extract_genus() — extract_genus","title":"extract_genus() — extract_genus","text":"binomial taxa supplied, extract genus name ","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_genus.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"extract_genus() — extract_genus","text":"","code":"extract_genus(binomial)"},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_genus.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"extract_genus() — extract_genus","text":"binomial binomial character string separated space (e.g. \"Loxodonta loxodonta\")","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_genus.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"extract_genus() — extract_genus","text":"string genus name","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_genus.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"extract_genus() — extract_genus","text":"method works exclusively genera species. genus known, relationship among species within genus known. makes method much computationally efficient. function used extract genus species name. genus name used place species correct taxonomic framework","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/extract_genus.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"extract_genus() — extract_genus","text":"James G. Hagan (james_hagan()outlook.com)","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_db_file_path.html","id":null,"dir":"Reference","previous_headings":"","what":"get_db_file_path — get_db_file_path","title":"get_db_file_path — get_db_file_path","text":"try fetch path given DB file : platform-specific appdata dir project dir/database (development) testdata dir","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_db_file_path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"get_db_file_path — get_db_file_path","text":"","code":"get_db_file_path(filename)"},{"path":"https://haganjam.github.io/InvAlloR/reference/get_db_file_path.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"get_db_file_path — get_db_file_path","text":"filename DB file look ","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_db_file_path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"get_db_file_path — get_db_file_path","text":"path requested file","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_habitat_data.html","id":null,"dir":"Reference","previous_headings":"","what":"get_habitat_data() — get_habitat_data","title":"get_habitat_data() — get_habitat_data","text":"Get habitat data Abell et al.'s (2008) freshwater ecoregion map","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_habitat_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"get_habitat_data() — get_habitat_data","text":"","code":"get_habitat_data(data, latitude_dd, longitude_dd)"},{"path":"https://haganjam.github.io/InvAlloR/reference/get_habitat_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"get_habitat_data() — get_habitat_data","text":"data data.frame column containing latitude longitude decimal degrees latitude_dd character string column name containing latitude decimal degrees longitude_dd character string column name containing longitude decimal degrees","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_habitat_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"get_habitat_data() — get_habitat_data","text":"tibble input data habitat data Abell et al.s (2008) ecoregion map attached additional columns function get habitat data","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_habitat_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"get_habitat_data() — get_habitat_data","text":"function takes data.frame latitude longitude data gets data biogeographic realm, major habitat type ecoregion based Abell et al.'s (2008) freshwater ecoregion map.","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_habitat_data.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"get_habitat_data() — get_habitat_data","text":"James G. Hagan (james_hagan()outlook.com) Ronald Bergmann","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_trait_from_taxon.html","id":null,"dir":"Reference","previous_headings":"","what":"get_trait_from_taxon() — get_trait_from_taxon","title":"get_trait_from_taxon() — get_trait_from_taxon","text":"Use taxonomic distance, life-stages, habitat data etc. select appropriate trait/equation","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_trait_from_taxon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"get_trait_from_taxon() — get_trait_from_taxon","text":"","code":"get_trait_from_taxon(   data,   target_taxon,   life_stage,   latitude_dd,   longitude_dd,   body_size,   workflow = \"workflow2\",   max_tax_dist = 3,   trait = \"equation\",   gen_sp_dist = 0.5 )"},{"path":"https://haganjam.github.io/InvAlloR/reference/get_trait_from_taxon.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"get_trait_from_taxon() — get_trait_from_taxon","text":"data data.frame least five columns: target taxon, life stage, latitude (dd), longitude (dd) body size (mm) trait == \"equation\" target_taxon character string column name containing taxon names life_stage character string column name containing life-stage information latitude_dd character string column name containing latitude decimal degrees longitude_dd character string column name containing longitude decimal degrees body_size character string column name containing body size data trait = \"equation\" workflow options \"workflow1\" \"workflow2\" (default = \"workflow2) max_tax_dist maximum taxonomic distance acceptable target taxa database (default = 3) trait trait searched (default = \"equation\") gen_sp_dist taxonomic distance genus species (default = 0.5)","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_trait_from_taxon.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"get_trait_from_taxon() — get_trait_from_taxon","text":"tibble chosen traits equations based input parameters","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_trait_from_taxon.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"get_trait_from_taxon() — get_trait_from_taxon","text":"function uses clean_taxon_names() function clean harmonise names target dataset. get_habitat_data() function used get relevant habitat information. select_traits_tax_dist() function calculates taxonomic distance focal taxon relevant entries different higher-level taxon graphs generated GBIF, ITIS COL taxonomic backbones. information combined choose appropriate trait equation target taxon name.","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/get_trait_from_taxon.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"get_trait_from_taxon() — get_trait_from_taxon","text":"James G. Hagan (james_hagan()outlook.com)","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/select_traits_tax_dist.html","id":null,"dir":"Reference","previous_headings":"","what":"select_traits_tax_dist() — select_traits_tax_dist","title":"select_traits_tax_dist() — select_traits_tax_dist","text":"Get taxonomic distances target names relative taxa databases","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/select_traits_tax_dist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"select_traits_tax_dist() — select_traits_tax_dist","text":"","code":"select_traits_tax_dist(   data,   target_taxon,   body_size,   life_stage,   max_tax_dist = 3,   trait = \"equation\",   gen_sp_dist = 0.5 )"},{"path":"https://haganjam.github.io/InvAlloR/reference/select_traits_tax_dist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"select_traits_tax_dist() — select_traits_tax_dist","text":"data input data.frame exported get_habitat_data() clean_taxon_names() function target_taxon character string column name containing taxon names body_size column name containing body length data life_stage character string column name containing life-stage information max_tax_dist maximum taxonomic distance acceptable target taxa database (default = 3) trait trait searched (default = \"equation\") gen_sp_dist taxonomic distance genus species (default = 0.5)","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/select_traits_tax_dist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"select_traits_tax_dist() — select_traits_tax_dist","text":"tibble input data traits equations within maximum taxonomic distance","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/select_traits_tax_dist.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"select_traits_tax_dist() — select_traits_tax_dist","text":"function searches relevant trait equation database best matching trait equation given target name based taxonomic distance","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/select_traits_tax_dist.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"select_traits_tax_dist() — select_traits_tax_dist","text":"James G. Hagan (james_hagan()outlook.com)","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/special_taxon_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Special taxon names — special_taxon_names","title":"Special taxon names — special_taxon_names","text":"vector special taxon names searched using regular search framework","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/special_taxon_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Special taxon names — special_taxon_names","text":"","code":"special_taxon_names()"},{"path":"https://haganjam.github.io/InvAlloR/reference/special_taxon_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Special taxon names — special_taxon_names","text":"vector special taxon names","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/special_taxon_names.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Special taxon names — special_taxon_names","text":"taxa often properly identified freshwater field research. example, different worm taxa, tardigrads, rotifers etc. often specified simply: Oligochaeta, Rotifera, Nematoda etc. Thus, special names can used general taxonomic similarity framework rather matched specific set equations developed taxa. provide several different geographical locations database can matched accurately possible.","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/special_taxon_names.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Special taxon names — special_taxon_names","text":"James G. Hagan (james_hagan()outlook.com)","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/update_user_db.html","id":null,"dir":"Reference","previous_headings":"","what":"update_user_db — update_user_db","title":"update_user_db — update_user_db","text":"Copy DB files appdata dir. Comes handy case got stale want update .","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/update_user_db.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"update_user_db — update_user_db","text":"","code":"update_user_db()"},{"path":"https://haganjam.github.io/InvAlloR/reference/use_equation_database.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate dry biomass using allometric equations — use_equation_database","title":"Calculate dry biomass using allometric equations — use_equation_database","text":"function takes data frame body size equation IDs computes dry biomass using species- trait-specific allometric models.","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/use_equation_database.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate dry biomass using allometric equations — use_equation_database","text":"","code":"use_equation_database(data, body_size_var, equation_id_var)"},{"path":"https://haganjam.github.io/InvAlloR/reference/use_equation_database.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate dry biomass using allometric equations — use_equation_database","text":"data data.frame tibble containing body size equation IDs. body_size_var character string naming body size variable data. equation_id_var character string naming equation ID variable data..","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/use_equation_database.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate dry biomass using allometric equations — use_equation_database","text":"list two elements: output data.frame original data predicted dry biomass. metadata joined data including columns trait database.","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/use_equation_database.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate dry biomass using allometric equations — use_equation_database","text":"","code":"if (FALSE) { # \\dontrun{ data <- tibble::tibble(equation_id = c(3, 5, 6), body_size = c(0.5, 0.3, 0.2)) result <- predict_dry_biomass(  data,   body_size_var = \"body_size\",   equation_id_var = \"equation_id\",   trait = \"leaf\" ) } # }"},{"path":"https://haganjam.github.io/InvAlloR/reference/view_equation_database.html","id":null,"dir":"Reference","previous_headings":"","what":"view_equation_database() — view_equation_database","title":"view_equation_database() — view_equation_database","text":"Get equation database tibble()","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/view_equation_database.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"view_equation_database() — view_equation_database","text":"","code":"view_equation_database()"},{"path":"https://haganjam.github.io/InvAlloR/reference/view_equation_database.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"view_equation_database() — view_equation_database","text":"tibble chosen traits equations based input parameters","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/view_equation_database.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"view_equation_database() — view_equation_database","text":"function loads equation database tibble() users can examine filter want find relevant equations.","code":""},{"path":"https://haganjam.github.io/InvAlloR/reference/view_equation_database.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"view_equation_database() — view_equation_database","text":"James G. Hagan (james_hagan()outlook.com)","code":""}]
